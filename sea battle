import random

# Создание игрового поля
board = [['O' for _ in range(10)] for _ in range(10)]

# Расстановка кораблей компьютером
ships = [(3, 'A'), (2, 'B'), (2, 'B'), (1, 'C'), (1, 'C'), (1, 'C'), (1, 'C')]

for ship_size, ship_code in ships:
    while True:
        x = random.randint(0, 9)
        y = random.randint(0, 9)
        orientation = random.choice(['h', 'v'])
        positions = []

        if orientation == 'h' and x + ship_size <= 10:
            positions = [(x + i, y) for i in range(ship_size)]
        elif orientation == 'v' and y + ship_size <= 10:
            positions = [(x, y + i) for i in range(ship_size)]

        if all(board[pos[0]][pos[1]] == 'O' for pos in positions):
            for pos in positions:
                board[pos[0]][pos[1]] = ship_code
            break


# Функция для отображения состояния игрового поля
def print_board(board):
    print('   A B C D E F G H I J')
    for i, row in enumerate(board):
        print(i, ' '.join(row))


# Функция для проверки наличия корабля по координатам
def is_ship_hit(board, x, y):
    return board[x][y] != 'O'


# Основной цикл игры
while True:
    print_board(board)

    # Ввод координат выстрела игроком
    while True:
        player_shot = input("Введите координаты выстрела (например, B3): ")

        if len(player_shot) == 2 and player_shot[0].isalpha() and player_shot[1].isdigit():
            x = int(player_shot[1])
            y = ord(player_shot[0].upper()) - ord('A')

            if 0 <= x < 10 and 0 <= y < 10:
                break

    # Проверка попадания игрока
    if is_ship_hit(board, x, y):
        print('Попадание!')
        board[x][y] = 'X'
    else:
        print('Мимо!')

    # Проверка условия победы игрока
    if all(board[i][j] != 'A' for i in range(10) for j in range(10)):
        print('Вы победили!')
        break

    # Ход компьютера
    while True:
        x = random.randint(0, 9)
        y = random.randint(0, 9)

        if not is_ship_hit(board, x, y):
            break

    # Проверка попадания компьютера
    if is_ship_hit(board, x, y):
        print('Компьютер попал!')
        board[x][y] = 'X'
    else:
        print('Компьютер промахнулся!')

    # Проверка условия победы компьютера
    if all(board[i][j] != 'A' for i in range(10) for j in range(10)):
        print('Компьютер победил!')
        break
